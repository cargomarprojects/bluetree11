<div class="page-header">
    <div class="col">
        <label class="mr-3">{{mainservice.title}}</label>
        <button class="btn btn-primary btn-sm mr-1" (click)="Close()">Return</button>
    </div>
</div>

<div *ngIf="errorMessage$ | async" class="alert alert-danger">
    {{errorMessage$ | async}}
</div>

<div class="page-body">
    <div class="row">
        <div class="col-md-4 p-1">
            <div class="page-body table-responsive table-bordered">
                <table class="table  table-hover table-sm">
                    <thead class="page-body-thead">
                        <tr>
                            <th>
                                <div class="form-check" (click)="mainservice.SelectDeselect()"> <input type="checkbox"
                                        class="form-check-input" [(ngModel)]="mainservice.chkall"><span>SELECTED</span>
                                </div>
                            </th>
                            <th>CLIENT CATEGORY</th>
                        </tr>
                    </thead>
                    <tbody class="page-body-tbody">
                        <tr *ngFor="let rec of records$ | async">
                            <td (click)="mainservice.ClientCategoryChk_Click(rec)">
                                <div class="form-check"> <input type="checkbox" class="form-check-input"
                                        [(ngModel)]="rec.cat_yn_b">
                                </div>
                            </td>
                            <td>{{rec.cat_name}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-8 p-1">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="createmail-tab" data-toggle="tab" href="#createmail" role="tab"
                        aria-controls="createmail" aria-selected="true">Create Mail</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="sendmail-tab" data-toggle="tab" href="#sendmail" role="tab"
                        aria-controls="sendmail" aria-selected="false">Send Mail</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active commonbgcolor2" id="createmail" role="tabpanel"
                    aria-labelledby="createmail-tab">
                    <div class="page-list">

                        <div class="page-search">
                            <div class="row">
                                <div class="col-md-12  px-0 mx-0">
                                    <div class="form-group row">
                                        <label class="col-2 col-form-label col-form-label-sm"></label>
                                        <div class="col-10">
                                            <button class="btn btn-info btn-sm mr-1">Validate IDs</button>
                                            <button class="btn btn-info btn-sm mr-1">Create Emails</button>
                                            <button class="btn btn-info btn-sm mr-1">Download Email IDs</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="page-search">
                            <div class="row">
                                <div class="col-md-12  px-0 mx-0">
                                    <div class="form-group row">
                                        <label class="col-md-12 col-form-label col-form-label-sm">Subject:</label>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <input type="text" class="form-control form-control-sm"
                                                [(ngModel)]="mainservice.Txt_Subject" (blur)="onBlur('Txt_Subject')" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-12 col-form-label col-form-label-sm">Message:</label>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-12">
                                            <textarea rows="10" [style.font-family]="mainservice.msgFontFamily"
                                                [style.font-size]="mainservice.msgFontSize"
                                                [style.color]="mainservice.msgForeground"
                                                [style.font-weight]="mainservice.msgFontWeight"
                                                class="form-control form-control-sm"
                                                [(ngModel)]="mainservice.Txt_Message"></textarea>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-12 col-form-label col-form-label-sm">Error:</label>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-12">
                                            <textarea rows="7" class="form-control form-control-sm"
                                                [(ngModel)]="mainservice.Txt_Error"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="page-search">
                            <div class="row">
                                <div class="col-md-12  px-0 mx-0">
                                    <div class="form-group row">
                                        <label class="col-2 col-form-label col-form-label-sm"></label>
                                        <div class="col-10">
                                            <button class="btn btn-info btn-sm mr-1">Validate IDs</button>
                                            <button class="btn btn-info btn-sm mr-1">Create Emails</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade commonbgcolor2" id="sendmail" role="tabpanel" aria-labelledby="sendmail-tab">

                    <app-bulkmail-header [_query]="searchQuery$ | async" (searchEvents)="searchEvents($event)">
                    </app-bulkmail-header>

                    <App-Page2 [_pageQuery]="pageQuery$ | async" (pageEvents)="pageEvents($event)"></App-Page2>

                    <div class="page-body table-responsive table-bordered">
                        <table class="table  table-hover table-sm">
                            <thead class="page-body-thead">
                                <tr>
                                    <th>SLNO</th>
                                    <th>BATCHS</th>
                                    <th>CTR</th>
                                    <th>TOT EMAILS</th>
                                    <th>CREATED DT</th>
                                    <th>MAIL</th>
                                    <th>SEND DT</th>
                                    <th>FAILED BATCHS</th>
                                </tr>
                            </thead>
                            <tbody class="page-body-tbody">
                                <tr *ngFor="let rec of records2$ | async">
                                    <td>{{rec.bm_slno}}</td>
                                    <td>{{rec.bm_filecount}}</td>
                                    <td>{{rec.bm_subctr}}</td>
                                    <td>{{rec.bm_tot_emails}}</td>
                                    <td>{{rec.bm_created_date | date : gs.date_display_fmt_with_time }}</td>
                                    <td>SEND</td>
                                    <td>{{rec.bm_send_date | date : gs.date_display_fmt_with_time }}</td>
                                    <td>{{rec.bm_failed_seq}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <App-Page2 [_pageQuery]="pageQuery$ | async" (pageEvents)="pageEvents($event)"></App-Page2>

                    <br />
                </div>
            </div>
        </div>
    </div>
</div>